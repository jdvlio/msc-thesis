\chapter{Scattered linear orders}


\section{Condensation maps and congruence lattices}

\begin{lem}[Congruence construction]\label{lem:IndCong}
        Suppose $\alpha$ is a linear order and $R$ is a transitive binary relation on $\alpha$.  Now define a another binary relation $\sim$ on $\alpha$ such that, for $a,b\in\alpha$, we have $a\sim b$ whenever one of the following is satisfied:
        \begin{enumerate}
            \item   $a=b$,
            \item   $a<b$ and $aRb$,
            \item   $b<a$ and $bRa$.
        \end{enumerate}
        Under these assumptions, $\sim$ is a congruence on $\alpha$.
\end{lem}

\begin{dfn}[Induced congruence]
        The congruence $\sim$ in lemma (\ref{lem:IndCong}) is referred to as the \textbf{congruence induced by $R$}.
\end{dfn}

\begin{dfn}[Factor maps]
        If $\alpha,\beta$ are linear orders then a \textbf{factor map} is a surjective homomorphism $\pi\colon\alpha\rightarrow\beta$.
\end{dfn}

\begin{dfn}[Splittings and Condensations]
        If $\sim$ is a congruence of the linear order $\alpha$ and $\pi\colon\alpha\to\faktor{\alpha}{\sim}$ is the (unique) factor map such that, for every $a,b\in\alpha$, it holds that:
        \begin{equation}
            	a\sim b\iff \pi(a)=\pi(b),
        \end{equation}
        then we call $\pi$ the \textbf{splitting} of $\alpha$ \textit{induced by} $\sim$, refer to the quotient $\faktor{\alpha}{\sim}$ as a \textbf{condensation} of $\alpha$ and write $\pi\colon\alpha\tto\faktor{\alpha}{\sim}$.
\end{dfn}

\begin{dfn}[Finite splitting]
        Suppose $\alpha$ is a linear order and $\sim$ is the congruence on $\alpha$ induced by the relation $R$ defined by:
        \begin{equation}
        	aRb\quad\iff\quad a<b\text{ and }[a,b]\text{ is finite}.
        \end{equation}
        For any linear order $\alpha$ we let $\fsplit$ denote the map $\fsplit\colon a\mapsto\faktor{a}{\sim}$ for $a\in\alpha$.  We refer to $\fsplit$ as the $\textbf{finite splitting}$.
\end{dfn}



\begin{prp}[Congruence lattices]
        Let $\con \alpha\subseteq\domain{2}\alpha$ be the set of all congruences on $\alpha$ and, for each $X\subseteq \con\alpha$, define:
        \begin{align}
            \bigwedge X &\coloneqq\bigcap X,\\
            \bigvee X   &\coloneqq\bigwedge\setbuild{a\in\con\alpha}{x\subseteq a,\forall x\in X}.
        \end{align}
        It then follows that $(\con\alpha,\vee,\wedge)$ is a complete lattic.  Furthermore, it holds what $\bigvee X=\trclos(\bigcup X)$ --- the latter being the \textit{transitive closure} of the (reflexive and symmetric) binary relation $\bigcup X$.
\end{prp}
\begin{proof}
	Let $X$ be an arbitrary (non-empty) subset of $\con\alpha$.  We now proceed to argue that $(\con\alpha,\vee,\wedge)$ is a complete lattice under the defined operations.  To achieve this, we are first required to show that (as defined above) the sets $\bigvee X$ and $\bigwedge X$ are in fact congruences.

	We first make the case for $\bigwedge X$.  Let $I$ denote the identity relation on $\domain{}\alpha$ then, since the members of $X$ are all reflexive, we must have $I\subseteq x$ for each $x\in X$ and thus $I\subseteq\bigcap X=\bigwedge X$.  Therefore $\bigwedge X$ is in fact a reflexive (binary) relation.  Also, since the members of $X$ are all symmetric it immediately follows that $\bigwedge X$ is also, since if $(a,b)\bigcap X$ then $(a,b)\in x$ for every $x\in X$ after which the symmetry of the members of $x$ yield the corresponding $(b,a)\in\bigcap X$.  In a somewhat similar fashion, an arbitrary intersection of transitive (binary) relations will again yield a transitive relation, all via first principles.

	Next we consider the case for $\bigvee X$.  Note that $I\subseteq \bigvee X$ since $X$ is non-empty and $I\subseteq x$ for each $x\in X$.  Therefore $\bigvee X$ is reflexive.  Note now that $\bigvee X$ is an intersection of symmetric (binary) relations and thus must itself also be symmetric.  In a similar fashion, since $\bigvee X$ is an intersection of transtive relations it must itself also be transitive.

	All that remains is to show that $\bigvee X=\trclos(\bigcup X)$.  Clearly we already have $\trclos(\bigcup X)\subseteq\bigvee X$, since $\bigvee X$ is transitive,  so we need only show that the reverse inclusion also holds.  Not that, by definition, we must have $x\subseteq\bigcup X$ for each $x\in X$.  Also, by definition of transitive closure, we also have $\bigcup X\subseteq \trclos(\bigcup X)$ and thus $x\subseteq\trclos(\bigcup X)$ for each $x\in X$, as required.
\end{proof}

\begin{prp}
         Suppose $f\colon\alpha\tto\beta$ is a factor map then there exists an unique congruence relation $\sim$ on $\alpha$ such that, if $\pi\colon\alpha\tto\faktor{\alpha}{\sim}$ is the splitting induced by $\sim$, there exists an unique isomorphism $\iota\colon\faktor{\alpha}{\sim}\to\beta$ making the diagram
        \begin{equation}
            \begin{tikzcd}
		\alpha \arrow[rr, "\pi",rightarrow]&&   \faktor{\alpha}{\sim}\\
		\\
		 &&   \beta \arrow[from=uu,"\iota", dashrightarrow] \arrow[from=uull,"f"']
            \end{tikzcd}
        \end{equation}
        commute.
\end{prp}
\begin{proof}
	The desired congruence relations is obtained in a manner familiar from algebra:  identify elements in $\alpha$ whenever they have the same image under $f$.  Borrowing a definition from universal algebra and lattice theory, we let $\sim$ be a binary relation whose underlying set of pairs is:
	\begin{equation}
		\kernel f=\setbuild{(a,b)\in\domain{2}\alpha}{f(a)=f(b)}.
	\end{equation}
	The required isomorphism $\iota\colon\faktor{\alpha}{\sim}\to\beta$ is then given by $\iota\colon[a]\mapsto f(a)$, for each $a\in\alpha$.  That $\iota$ is well-defined follows simply from the definition of ${\sim}=\kernel f$.

	We are now required to establish the uniquness of $\sim$ and $\iota$ in their respective roles.  By way of contradiction then, suppose $\sim_0$ is a congruence of $\alpha$ so that there exists an unique isomorphism $\iota_0$ that makes
        \begin{equation}
            \begin{tikzcd}
		\alpha \arrow[rr, "\pi_0",rightarrow]&&   \faktor{\alpha}{\sim_0}\\
		\\
		 &&   \beta \arrow[from=uu,"\iota_0", dashrightarrow] \arrow[from=uull,"f"']
            \end{tikzcd}
        \end{equation}
	commute.  This then clearly implies that ${\sim_0}=\ker f={\sim}$ and thus also $\iota_0=\iota$.
\end{proof}

\section{Hausdorff's characterisation of the countable scattered linear orders}


\begin{prp}[Operations on $\scattered$]\label{prp:OpScattered}
        The following properties hold:
        \begin{enumerate}
            \item   If $I\in\scattered$ and $\alpha_i\in\scattered$ for each $i\in I$ then $\sum_{i\in I}\alpha_i\in\scattered$,
            \item   If $\alpha,\beta\in\scattered$ then $\alpha+\beta,\alpha\cdot\beta\in\scattered$.
        \end{enumerate}
\end{prp}

\begin{proof}
        (1):  Suppose, by way of contradiction, that $\delta\subseteq\sum_{i\in I}\alpha_i$ is dense and define $\delta_i=\delta\cap\alpha_i$, for each $i\in I$.  Note that, since $\delta$ is dense, we cannot have $1<\card{\delta_i}<\aleph_0$ for any $i\in I$.  Therefore, each $\delta_i$ is either infinite or has at most one element.  If $\delta_i$ is finite for each $i\in I$ then $\delta\preceq I$, contradicting the definition of $I$.  Consequently, the must exists some $j\in I$ such that $\delta_j$ is infinite.  However, since $\delta_j\subseteq\alpha_j$, this implies that $\alpha_j$ has a dense subset --- the desired contradiction.

        (2):  Choosing $I=\two$, $\alpha_0=\alpha$ and $\alpha_1=\beta$ in (1) yields $\alpha+\beta\in\scattered$.  In stead, choosing $I=\beta$ and $\alpha_i=\alpha$ for each $i\in\beta$ we get $\alpha\cdot\beta\in\scattered$, as required.
\end{proof}

\begin{dfn}[The class $\VD$]
        By way of transfinite recursion, define for each ordinal $\gamma<\omega_1$ the class of linear orders $\VD_{\gamma}\subseteq\linear$ to be the smallest class which is \textit{closed under isomorphisms} while also satisfying:
        \begin{enumerate}
            \item   $\zero,\one\in\VD_0$,
            \item   if $\alpha_i\in\bigcup_{\beta<\gamma}\VD_{\beta}$, for each $i\in \zeta$, then $\sum_{i\in\zeta}\alpha_i\in\VD$.
        \end{enumerate}
        The class $\VD=\bigcup_{\gamma<\omega_1}\VD_\gamma$ called the class of $\textbf{(countable) very discrete}$ linear orders.
\end{dfn}

\begin{dfn}[$\VD$-rank]
        If $\alpha$ is a very discrete linear order then its $\bm{\mathcal{VD}}$\textbf{-rank} $\vdrank(\alpha)$ is the least ordinal $\beta$ such that $\alpha\in\VD_{\beta}$.
\end{dfn}

\begin{lem}\label{prp:vdsct}
	Every very discrete linear order is scattered.  That is to say that $\VD\subseteq\scattered$.
\end{lem}
\begin{proof}
	We argue by transfinite induction on $\gamma$ that $\VD_\gamma\subseteq\scattered$.  Finite linear orders are (trivially) scattered and thus $\zero,\one\in\scattered$.

	Assume now that for all ordinals $\gamma<\delta<\omega_1$ that $\VD_\gamma\subseteq\scattered$.  By definition, if $\vdrank(\alpha)=\delta$ then there exists for each $i\in\zeta$ an $\alpha_i\in\VD_{\gamma_i}$, for some ordinal $\gamma_i<\delta$, such that
	\begin{equation}
		\alpha=\sum_{i\in\zeta}\alpha_i.
	\end{equation}
	It now follows from proposition (\ref{prp:OpScattered}) and the inductive hypothesis that $\alpha$ is a scattered sum of scattered linear orders and therefore we must have $\alpha\in\scattered$.
\end{proof}

\iffalse\begin{lem}
        If $\alpha\in\VD$ and $\beta\subseteq\alpha$ is convex in $\alpha$ then $\beta\in\VD$.
\end{lem}

\begin{proof}
	 We argue by induction on  $\vdrank(\alpha)$.  The case $\vdrank(\alpha)=0$ is trivial so suppose that $\beta\subseteq\alpha$ and $\beta$ convex in $\alpha$ imply $\beta\in\VD$ whenever $\vdrank(\alpha)<\gamma<\omega_1$.  Suppose now that $\vdrank(\alpha)=\gamma$ and $\beta\subseteq\alpha$ is convex in $\alpha$.  By definition, for each $i\in\zeta$ there must exist $\alpha_i\in\VD_{\gamma_i}$, for some $\gamma_i<\gamma$, such that
	\begin{equation}
	    \alpha=\sum_{i\in\zeta}\alpha_i.
	\end{equation}
	Now define $\beta_i=\beta\cap\alpha_i$ for each $i\in I$.  For each $i\in\zeta$, since $\beta_i$ is convex in $\alpha_i$ and $\vdrank(\alpha_i)<\gamma$, it follows that $\beta_i\in\VD$.  However, note that
	\begin{equation}
	    \beta=\sum_{i\in\zeta}\beta_i.
	\end{equation}
	Therefore, by definition of $\VD$ it follows that $\beta\in\VD$.
\end{proof}\fi

    \begin{lem}\label{prp:sctvd}
        If $\alpha\in\scattered$ and $\card{\alpha}\leq\aleph_0$ then $\alpha$ is very discrete.
    \end{lem}

\begin{proof}
    Suppose $\alpha\in\scattered$ is countable and define a relation $R$ on $\domain{}\alpha$ such that, for every $a,b\in\alpha$, we have $aRb$ whenever $a\leq b$ and $[a,b]$ is very discrete.  Note that $R$ is transitive and thus, by lemma (\ref{lem:IndCong}), it induces a congruence relation $\sim$ on $\domain\alpha$.

        Define the condensation $\beta=\faktor{\alpha}{\sim}$.  If $\card{\beta}=1$ then there is nothing to prove so we may assume $\card{\beta}>1$.  By definition of $\VD$, it now suffices to show that $\beta\embed\zeta$ since every $\alpha\in\beta$ is very discrete simply by definition of $\sim$.  We will suppose to the contrary that $\beta\not\embed\zeta$.  Consequently, $\beta$ must be infinite.
\end{proof}

    	\iffalse\begin{prp}\label{prp:splitfix}
		Suppose $\Lambda$ is the lattice of condensations of the linear order $\alpha$.  Define $S$ to be the functor that takes each factor map $f\colon\alpha\to\beta$ to the splitting $S(f)\colon\alpha\to\faktor{\alpha}{\sim_\beta}$, for some congruence $\sim_\beta$ on $\alpha$, such that the unique isomorphism $\iota_\beta\colon\faktor{\alpha}{\sim_\beta}\to\beta$ makes the diagram
		\begin{equation}
			\begin{tikzcd}
				\alpha\arrow[rr,"S(f)"]&&\faktor{\alpha}{\sim_\beta}\arrow[dd,"\iota_\beta",dashrightarrow]\\
				\\
						       &&\beta\arrow[from=lluu,"f"]
			\end{tikzcd}
		\end{equation}
		commute.  If $\beta\in\Lambda$ is a minimal fixed point of $S^\prime=S\fsplit[-]$, and $\beta$ is not trivially dense then $\beta\in\Dense$.
		\begin{enumerate}
			.
		\end{enumerate}
	\end{prp}\fi

\begin{thm}[Hausdorff's Theorem]
	A linear order $\alpha$ is countable and  scattered iff it is very discrete.
\end{thm}
\begin{proof}

	\forward\	This is lemma (\ref{prp:sctvd}).

	\backward\	This is proposition (\ref{prp:vdsct}).
\end{proof}


\section{The first-order theory of scattered linear orders}


\begin{prp}[Condensations and scatteredness]
        A linear order $\alpha$ is scattered iff there exists no condensation $\beta$ of $\alpha$ such that $\beta$ is dense.
    \end{prp}

    \begin{dfn}[Definably scattered]
	    A linear order $\alpha$ is \textbf{definably scattered} whenever, for every $n\in\nats$, there exists no $\bar{a}\in\domain{n}\alpha$ and no congruence formula $\varphi(x,y,\bar{z})$ of $\alpha$ such that, if $\sim$ is the congruence defined by $\varphi(x,y,\bar{a})$, then $\faktor{\alpha}{\sim}$ is a dense linear order.
    \end{dfn}

\begin{prp}
        If $\alpha$ is some linear order then the following are equivalent:
        \begin{enumerate}
            \item   $\alpha$ is definably scattered,
	    \item   there exists no dense linear order $\delta$ and no $n\in\nats$ such that, for some $\bar{b}\in\domain{n}\delta$ and $\bar{a}\in\domain{n}\alpha$, $(\delta,\bar{b})$ is interpretable in $(\alpha,\bar{a})$,
            \item   the lattice $\defcon\alpha$ is atomic.
        \end{enumerate}
\end{prp}
    	\begin{proof}

	\end{proof}

\begin{prp}\label{prp:dcform}
	For each formula $\varphi=\varphi(x,y,\bar{z})$, with $\bar{z}$ possibly empty, define the formula $\epsilon_\varphi(\bar{z})$ to be the conjunction of the following formulas:
	\begin{enumerate}
		\item	$\forall x\varphi(x,x,\bar{z})$,\hfill(reflexivity)
		\item	$\forall x\forall y(\varphi(x,y,\bar{z})\rightarrow\varphi(y,x,\bar{z}))$,\hfill (symmetry)
		\item 	$\forall x\forall y\forall w(\varphi(x,y,\bar{z})\wedge\varphi(y,w,\bar{z})\rightarrow\varphi(x,w,\bar{z}))$.\hfill (transitivity)
		\item 	$\forall x_0\forall x_1\forall y_0\forall y_1(x_0<x_1\wedge\neg\varphi(x_0,x_1,\bar{z})\wedge\varphi(x_0,y_0,\bar{z})\wedge\varphi(x_1,y_1,\bar{z})\rightarrow y_0<y_1)$.\phantom{}\hfill(compatibility)
	\end{enumerate}
	For every finite tuple $\bar{a}$ of $\alpha$ (of the same length as $\bar{z}$), it holds that $\alpha\models\epsilon_\varphi(\bar{a})$ iff $\varphi(x,y,\bar{a})$ defines a congruence of $\alpha$.
\end{prp}

\begin{thm}
	For every countable, definably scattered linear order $\alpha$ and every  $n\in\nats$ there exists a $\beta_n\in\scattered$ such that $\alpha\nequiv{n}\beta_n$.
\end{thm}
\begin{proof}
	Suppose $\alpha\models\Th(\scattered)$ is countable and fix any $n\in\nats$.  Now define a binary relation $R$ on $\domain{}\alpha$ such that $aRb$ iff there exists a $\beta\in\scattered$ such that $(a,b)\nequiv{n}\beta$ in the language of $k$-coloured linear orders (for some $k\in\nats$).  Since $R$ is clearly transitive, it induces a cogruence $\sim$ on $\alpha$.  Moreover, $\sim$ is defined by the $L_{\omega_1\omega}$ formula $\varphi(x,y)$ given by:
	\begin{equation}
		x=;y\vee(x<y\wedge\bigvee_{\beta\in\scattered}(\cha{\beta}{n})^{(x,y)})\vee(y<x\wedge\bigvee_{\beta\in\scattered}(\cha{\beta}{n})^{(y,x)}).
	\end{equation}
	Note that, since our language is finitary, we need only choose finitely many characterstics $\alpha_i\in\scattered$ such that $\alpha_0,\dotsc,\alpha_{m-1}$ is a traversal of the $n$-equivalence classes of $\scattered$. Thus we may identify $\varphi$ with its first-order equivalent which, has finite length.

	\begin{claim}\label{clm:LL1}
		Each $\gamma\in\faktor{\alpha}{\sim}$ has a scattered $n$-equivalent.
	\end{claim}
	\begin{proof}
		Choose any $\gamma\in\faktor{\alpha}{\sim}$.  If there exists a least element $a_0\in\gamma$ then, since $\alpha$ and thus $\gamma$ is countable, there exists a cofinal sequence $\family{a_i}{i<\omega}$.  By Ramsey's Theorem, there then exists a homogeneous subsequence $\family{a^\prime_i}{i<\omega}\subseteq\family{a^\prime_i}{i<\omega}$ for the colouring $h$ that sends intervals $(a_i,a_j)$, with $i<j$, to a characteristic among $\alpha_0,\dotsc,\alpha_{m-1}$.  Consequently, $\gamma$ is an $\omega$-sum
		\begin{equation}
			\gamma=\sum_{i<\omega}[a^\prime_i,a^\prime_{i+1})
		\end{equation}
		where all of the summands are $n$-equivlent to the same $\one+\alpha_{i_0}$ for some $i_0\in\set{0,\dotsc,m-1}$ so that, since summation preserves $n$-equivalence, it follows that $\gamma$ is $n$-equivalent to the scattered linear order:
		\begin{equation}
			\gamma^\prime=(\one+\alpha_{i_0})\cdot\omega.
		\end{equation}
		Since $\gamma^{<a^\prime_0}=[a_0,a^\prime_0))$, by defintion of $\sim$, has an $n$-equivalent (($\gamma^\prime_0$ say) it follows that $\beta_n=\gamma_0+\gamma^\prime$ is the desired scatterred $n$-equivalent of $\gamma$.

		A similar argument can be obtained for when $\gamma$ has a greatest element by dualising the argument above (i.e. respectively swap around $<$ and $>$ as well as $\leq$ and $\geq$.  In te case where $\gamma$ has neither a largest nor a smallest element choose some fixed $a\in\gamma$ and apply a similar argument in the respective suborderings $\gamma^{\geq a}$ and $\gamma^{<a}$.  The sum of their $n$-equivalents will then yield a scattered $n$-equivalent of the equivalence class $\gamma$, as required.\noqed
	\end{proof}

	\begin{claim}
		The equivalence classes are dense under the induced order.
	\end{claim}
	\begin{proof}
		Suppose $\epsilon_0,\epsilon_1\in\faktor{\alpha}{\sim}$ satisfy the property $\epsilon_0<\epsilon_1$ and and then assume, by way of contradiction, that for no $c\in\alpha$ does it hold that:
		\begin{equation}
			\epsilon_0<c<\epsilon_1.
		\end{equation}
		However, since $n$-equivalence is preserved under sums it follows that $\epsilon_0+\epsilon_1$ is $n$-equivalent to some scattered linear order which implies tha by choosing an $a_0\in\epsilon_1$ and an $a_1\in\epsilon_1$ that $(a_0,a_1)$ posess a scattered $n$-equivalent.  This is the desired contradiction as then, by defition, it would have to hold that $a_0\sim a_1$: a contradiction.\noqed
	\end{proof}
	Since $\faktor{\alpha}{\sim}$ is dense and $\alpha$ is definably scattered, the only possible conclusion is that $\faktor{\alpha}{\sim}\cong\one$.  From claim \ref{clm:LL1} the result then follows.
\end{proof}

\begin{prp}\label{prp:rescat}
	For each formula $\varphi(x,y,\bar{z})$ define $\theta_\varphi(\bar{z})$ to be the formula
	\begin{equation}
		\forall x\forall y\big((x<y\wedge\neg\varphi(x,y,\bar{z}))\rightarrow\exists w(x<w<y\wedge\neg\varphi(x,w,\bar{z})\wedge\neg\varphi(w,y,\bar{z}))\big)
	\end{equation}
	which formalises the statement: ``the condensation which is induced by the congruence, defined by the formula $\varphi$, is dense'' and let each $\epsilon_\varphi(\bar{z})$ be defined as in proposition \ref{prp:dcform}.  It then holds that:
	\begin{enumerate}
		\item the theory $\Sigma=\set{\axmlin}\cup\setbuild{\forall\bar{z}(\epsilon_\varphi(\bar{z})\rightarrow\neg\theta_\varphi(\bar{z}))}{\varphi=\varphi(x,y,\bar{z})}$ axiomatises $\Th(\scattered)$, i.e.\ $\dcl{\Sigma}=\Th(\scattered)$,

		\item $\Sigma$ is recursively enumerable.
	\end{enumerate}
	\begin{proof}
		\begin{enumerate}[nosep]
			\item	$\alpha\models\Sigma$ iff $\alpha$ is definably scattered iff $\alpha\models\Th(\scattered)$.
			\item	Since our signature is finite it follows that the set of formulas in our language can be enumerated (via a G\"odel numbering $\godel{-}\colon L\to\nats$).  We can then enumerate $\Sigma$ by declaring a map acting on $\Sigma$ such that $\axmlin\mapsto 0$ and, for every tuple $\bar{z}$ of variables,
			\begin{equation}
				\forall \bar{z}(\epsilon_\varphi(\bar{z})\rightarrow\theta_\varphi(\bar{z})))\mapsto 2^{\godel{\varphi(x,y,\bar{z})}}.
			\end{equation}
		\end{enumerate}
	\end{proof}
\end{prp}


\section{Theorems of L\"auchli and Leonard}

\begin{dfn}[The class $\Mzero$]
	The class $\Mzero$ is the smallest class of linear orders which satisfies the following:
	\begin{enumerate}
		\item	$\zero,\one\in\Mzero$,
		\item	if $\alpha,\beta\in\Mzero$ then $\alpha+\beta\in\Mzero$,
		\item	if $\alpha\in\Mzero$ then $\alpha\cdot\omega,\alpha\cdot\dual{\omega}\in\Mzero$,
	\end{enumerate}
\end{dfn}

\begin{prp}\label{prp:M0sum}
	Let $n\in\nats$ and suppose for each $i<\omega$ it holds that $\alpha_i\in\Mzero$ then there exists a $\beta\in\Mzero$ such that
	\begin{equation}
		\sum_{i<\omega}\alpha_i\nequiv{n}\beta.
	\end{equation}
\end{prp}
\begin{proof}
	For each $i,j<\omega$, if $i<j$ then define $\alpha_{ij}=\alpha_{i+1}+\alpha_{i+2}+\dotsb+\alpha_j$ and note that $\alpha_{ij}\in\Mzero$ since $\Mzero$ is closed under finite sums.  Choose $S=\set{\beta_0,\dotsc,\beta_{k-1}}\subseteq\Mzero$ to be an $n$-spectrum for $\Mzero$.  Consequently, there exists a colouring $h$ of $\omega$ whose codomain is $\set{0,\dotsc,k-1}$ such that $h(i,j)=\ell$ iff $\alpha_{ij}\nequiv{n}\beta_\ell$.

	It now follows from Ramsey's theorem that there exists a homogeneous sequence $\family{i_j}{j<\omega}$ for $h$.  By definition, there exists a natural $m$ such that $0\leq m<k$ and $\alpha_{i_ji_{j+1}}\nequiv{n}\beta_m$, for every $j<\omega$.  Note, from lemma \ref{lem:fvsum}, it follows that
	\begin{align}
		\sum_{i<\omega}\alpha_i&\cong\alpha_0+\alpha_1+\dotsb+\alpha_{i_0}+\sum_{j<\omega}\alpha_{i_ji_{j+1}}\\
		&\nequiv{n}\alpha_0+\dotsb+\alpha_{i_0}+\beta_m\cdot\omega,
	\end{align}
	Since $\Mzero$ is closed under finite sums, we may thus conclude that if $\beta=\alpha_0+\dotsb+\alpha_{i_0}+\beta_m\cdot\omega$ then $\sum_{i<\omega}\alpha_i\nequiv{n}\beta$, as required.
\end{proof}

\begin{prp}\label{prp:M0sumop}
	Let $n\in\nats$ and suppose for each $i\in\dual{\omega}$ it holds that $\alpha_i\in\Mzero$ then there exists a $\beta\in\Mzero$ such that
	\begin{equation}
		\sum_{i\in\dual{\omega}}\alpha_i\nequiv{n}\beta.
	\end{equation}
\end{prp}
\begin{proof}
	Dualise the argument in the proof of proposition \ref{prp:M0sum}.
\end{proof}

\begin{prp}\label{prp:M0sumint}
	Let $n\in\nats$ and suppose for each $i\in\ints$ it holds that $\alpha_i\in\Mzero$ then there exists a $\beta\in\Mzero$ such that
	\begin{equation}
		\sum_{i\in\zeta}\alpha_i\nequiv{n}\beta.
	\end{equation}
\end{prp}
\begin{proof}
	Choose any fixed $a_0\in\alpha_0$ and define $\alpha=\sum_{i\in\zeta}\alpha_i$ apply propositions \ref{prp:M0sum} and \ref{prp:M0sum} respectively to $\alpha^{>a_0}$ and $\alpha^{<a_0}$ to obtain their (respective $n$-equivelants $\beta^+\in\Mzero$ and $\beta^-\in\Mzero$.  It then follows, since $\Mzero$ is closed under finite sums, that if $\beta=\beta^-+\one+\beta^+$ then $\alpha\nequiv{n}\beta$, as required.
\end{proof}

\begin{thm}[L\"auchli and Leonard]
	For every countable $\alpha\in\scattered$, and each $n\in\nats$, there exists a $\beta_n\in\Mzero$ such that $\alpha\nequiv{n}\beta_n$.
\end{thm}
\begin{proof}
	Suppose $\alpha\in\scattered$ is countable.  From Hausdorff's theorem it follows that $\alpha$ is very discrete so we may argue by induction on the $\VD$-rank of $\alpha$. Since $\zero,\one\in\Mzero$, the result holds when $\vdrank(\alpha)=0$.

	Assume now there exists an ordinal $\gamma<\omega_1$ such that if $\vdrank(\alpha)<\gamma$ then, for every $n\in\nats$, there exists a $\beta_n\in\Mzero$ such that $\alpha\nequiv{n}\beta_n$.  Now fix any $n\in\nats$ and  suppose $\vdrank(\alpha)=\gamma$ then, by definition of $\VD$, there exists an $\alpha_i\in\VD$ such that $\vdrank(\alpha_i)<\gamma$, for each $i\in\ints$, such that
	\begin{equation}
		\alpha=\sum_{i\in\zeta}\alpha_i.
	\end{equation}
	By the induction hypothesis there exists, for each $i\in\ints$, some $\alpha^\prime_i\in\Mzero$ such that $\alpha_i\nequiv{n}\alpha_i^\prime$.  It now follows from lemma \ref{lem:fvsum}, if we choose $\alpha^\prime=\sum_{i\in\zeta}\alpha_i^\prime$, that $\alpha\nequiv{n}\alpha^\prime$.  According to proposition \ref{prp:M0sumint} there exists a $\beta\in\Mzero$ such that $\alpha^\prime\nequiv{n}\beta$ and, therefore, $\alpha\nequiv{n}\beta$, as required.
\end{proof}

\begin{prp}
	Suppose $\alpha$ and $\beta$ are linear orders and consider the families $\family{\mathfrak{A}_i}{i\in\alpha}$ and $\family{\mathfrak{B}_j}{j\in\beta}$ such that, for each $i\in\alpha$ and $j\in\beta$, $\mathfrak{A}_i,\mathfrak{B}_j$ are regular $L^\prime$-expansions of linear orders.  If $n\in\nats$, $\alpha\nequiv{n}\beta$ and, for each $i\in\alpha$ and $j\in\beta$,
	\begin{equation}
		\mathfrak{A}_i\nequiv{n}\mathfrak{B}_j
	\end{equation}
	then it necessarily follows that
	\begin{equation}
		\sum_{i\in\alpha}\mathfrak{A}_i\nequiv{n}\sum_{j\in\beta}\mathfrak{B}_j.
	\end{equation}
\end{prp}
\begin{proof}
	We describe a winning strategy for $\Right$ in the $n$-round game
	\begin{equation}
		\EF_n\left(\sum_{i\in\alpha}\mathfrak{A}_i,\sum_{j\in\beta}\mathfrak{B}_j\right).
	\end{equation}
	A move $(a,i)$ in $\sum_{i\in\alpha}\mathfrak{A}_i$ by $\Left$ is countered by $\Right$ by first employing his winning strategy in the game $\EF_n(\alpha,\beta)$ to obtain some $j\in\beta$ followed by an application of his winning strategy in the game $\EF_n(\mathfrak{A}_i,\mathfrak{B}_j)$ in order to acquire a $b\in B_j$.  The countermove by $\Right$ is then $(b,j)$.  A similar choice is made in the case that $\Left$ instead plays some $(b^\prime,j^\prime)$ in the opposing sum.
\end{proof}

\begin{lem}\label{lem:psscat}
	The following set is recursively enumerable:
	\begin{equation}
		R\coloneqq\setbuild{(\alpha,\sigma)}{\alpha\in\Mzero\text{ and }\alpha\models\sigma}.
	\end{equation}
\end{lem}
\begin{proof}
	Recursively on $\Mzero$, for each $\alpha\in\Mzero$, by adding finitely many (new) relation symbols to $L$ we shall define a language $L_\alpha\supseteq L$ and first-order theories $S_\alpha$, $T_\alpha$ such that $T_\alpha\supseteq S_\alpha$ is a recursively enumerable complete theory.  The role of each $S_\alpha$ will be that of a finitely axiomatisable theory whose models interpret a finitely axiomatisable linear order.

	If $\alpha=\zero$ then we choose $L_\alpha$ to be the language of linear orders and we define $T_\alpha=S_\alpha$ to consist only of the sentence $\neg\exists x(x=x)$.  While, when $\alpha=\one$, we choose the same $L_\alpha$ as before and define $T_\alpha=S_\alpha$ to consist only of the sentence $\axmlin\wedge\exists x\forall y(x=y)$.

	In both cases above, $T_\alpha$ is recursively enumerable (since it is finite) as well as complete:  $T_\alpha$ determines its models up to isomorphism.

	Assume now that $L_\alpha$, $T_\alpha$ and $S_\alpha$ have been defined for $\alpha\in\set{\alpha_0,\alpha_1}$ and that $T_{\alpha_0},T_{\alpha_1}$ are recursively enumerable (complete) theories.  Suppose that $\alpha=\alpha_0+\alpha_1$ and expand $L$ by adding the unary relation symbols $r_0$ and $r_1$ in order to obtain $L_\alpha$.  These new symbols will serve to ``identify'' the linear orders $\alpha_0$ and $\alpha_1$, respectively, within $\alpha$.  Let $S_\alpha$ consist of exactly the $L_\alpha$-sentences $\axmlin$, $\forall x(r_0(x)\vee r_1(x))$ and $\forall x\forall y(r_0(x)\wedge r_1(y)\rightarrow x<y)$ while also choosing
	\begin{equation}
		T_\alpha=S_\alpha\cup\setbuild{\sigma^{r_0(v)}}{\alpha_0\models\sigma}\cup\setbuild{\sigma^{r_1(v)}}{\alpha_1\models\sigma}.
	\end{equation}

	We now argue that $T_\alpha$ is complete.  Note that if $\mathfrak{M},\mathfrak{N}\models T_\alpha$ then, by definition, their respective order types, $\beta$ and $\delta$, can be decomposed as $\beta=\beta_0+\beta_1$ and $\delta=\delta_0+\delta_1$ such that,
	\begin{equation}
		\beta_i,\delta_i\models\Th(\alpha_i), \quad\text{for }i=0,1.
	\end{equation}
	Therefore $\beta_0\equiv\delta_0$ and $\beta_1\equiv\delta_1$ so that, for each $n\in\nats$, $\Right$ has the (respective) winning strategies $s_n$ and $t_n$ for the games $\EF_n(\beta_0,\delta_0)$ and $\EF_n(\beta_1,\delta_1)$.

	The winning strategy for $\Right$ in the game $\EF_n(\mathfrak{M},\mathfrak{N})$ is laid out as follows.  A move in the $\beta_0$-part of $\mathfrak{M}$ is countered using the strategy $s_n$, as if playing the game $\EF_n(\beta_0,\delta_0)$ while a move in the $\beta_1$-part is similarly countered but using the strategy $t_n$.  If instead $\Left$ plays a member of $\mathfrak{N}$ then a similar methodology may be employed.

	If $\alpha=\alpha_0\cdot\omega$ then we obtain $L_\alpha$ from $L$ by adding a single binary relation symbol $\theta$.  Choose $\Gamma$ to be the (unique) interpretation of $L$ in $L_\alpha$ such that $\Gamma(x<y)$ is the formula $x<y\wedge\neg\theta(x,y)$.

	Let $\Sigma$ consist of the (finitely many) $L_\alpha$-sentences which, together, express the assertion ``$\theta$ is an equivalence relation'' as well as the sentence
	\begin{equation}
		\forall x_0\forall x_1\forall y_0\forall y_1( x_0<y_0\wedge\neg\theta(x_0,y_0)\wedge\theta(x_1,x_0)\wedge\theta(y_1,y_0)\rightarrow x_1<y_1).
	\end{equation}
	so that, in fact, $\theta$ is a congruence and not simply a mere equivalence relation.

	Define $S_\alpha$ to be a finite axiomatisation of the $L_\alpha$-theory
	\begin{equation}
		\Gamma\left[\Th(\omega)\right]\cup\Sigma\cup\set{\axmlin}
	\end{equation}
	and let $T_\alpha=S_\alpha\cup\setbuild{\forall w\sigma^{\theta(w,v)}}{\alpha_0\models\sigma}$.  The latter set of sentences expresses the sentiment that each $\theta$-equivalence class is elementarily equivalent to $\alpha_0$.

	Note, it follows from the induction hypothesis that $T_\alpha$ is recursively enumerable.  The burden is now on us to show that the $L_\alpha$-theory $T_\alpha$ is complete.  Consider any $\mathfrak{M},\mathfrak{N}\models T_\alpha$ then the respective order types, $\beta$ and $\delta$, of $\mathfrak{M}$ and $\mathfrak{N}$ can be decomposed as
	\begin{equation}
		\beta=\beta_0\cdot\gamma_0\qquad\text{and}\qquad\delta=\delta_0\cdot\gamma_1,
	\end{equation}
	such that $\gamma_0\equiv\omega\equiv\gamma_1$ and $\beta_0,\delta_0\models\Th(\alpha_0)$.

	Fix any $n\in\nats$ then we describe a winning strategy for $\Right$ in the game $\EF_n(\mathfrak{M},\mathfrak{N})$.  If $\Left$ plays the move $(a,i)\in\domain{}\beta\times\domain{}\gamma_0$ then $\Right$ chooses a $j\in\gamma_1$ using his winning strategy in the game $\EF_n(\gamma_0,\gamma_1)$.  This is then followed by a choice of $b\in\delta_0$ using his winning strategy in the game $\EF(\beta_0,\delta_0)$.  This determines the countermove $(b,j)$.  If $\Left$ instead plays a move in the opposite structure then a countermove be obtained by $\Right$ in a similar fashion.

	The case when $\alpha=\alpha_0\cdot\dual{\omega}$ is approached in a similar manner: let $\theta$, $L_\alpha$, $\Gamma$ and $\Sigma$ be defined as before.  Choose $S_\alpha$ to be a finite axiomatisation of the theory
	\begin{equation}
		\Gamma[\Th(\dual{\omega})]\cup\Sigma\cup\set{\axmlin}
	\end{equation}
	and define $T_\alpha$ as in the previous case.  It again follows that $T_\alpha$ is recursively enumerable and a similar argument as before will suffice to show that $T_\alpha$ is complete.

	All that remains is that a mechanical listing of the set
	\begin{equation}
		R^\prime\coloneqq\setbuild{(\alpha,\sigma)}{\alpha\in\Mzero\text{ and }\sigma\text{ is an }L_\alpha\text{-sentence such that }T_\alpha\models\sigma}
	\end{equation}
	need be given.  Once this procedure has been established it will follow that $R$ is also recursively enumerable since, for any $\alpha\in\Mzero$ and $\sigma\in L_\alpha$, the problem of whether or not $\sigma$ is a member of $L$ is decidable.

	The list starts with all pairs of the form $(\alpha,\sigma)$ such that $\alpha\in\set{\zero,\one}$ and $\sigma\in S_\alpha$, noting that the aforementioned pairs are finite in number.  Now assume the entries $(\alpha_i,\sigma_i)$, for $i=0,\dotsc,n_0-1$, have been listed.  Continue the list sequentially with entries $(\alpha_i,\sigma_i)$, for $i\geq n$, as follows:
	\begin{enumerate}
		\item 	list all pairs of the form $(\alpha_i,\sigma)$ such that $\sigma\in S_{\alpha_i}$ and $i<n_0$ and let $n_1$ denote the resulting number of entries in the list;
		\item 	list all pairs of the form $(\alpha_i, \sigma)$, for $i<n_1$, where $\sigma$ is the direct consequence of an inference rule from $\sigma_{i_0},\dotsc,\sigma_{i_{k-1}}$ and, for each $j<k$, $(\alpha_i,\sigma_{i_j})$ has already appeared in the list and let $n_2$ denote the resulting number of entries;
		\item	list all pairs of the form $(\alpha,\sigma)$ where, for $i,j<n_2$, $\alpha=\alpha_i+\alpha_j$ and $\sigma=\sigma_i^{r_0(v)}\wedge\sigma_j^{r_1(v)}$ and let $n_3$ denote the resulting number of entries in the list;
		\item	list all pairs of the form $(\alpha_i\cdot\omega,\sigma)$, for $i<n_3$, such that $\sigma=\forall w\sigma_i^{\theta(w,v)}$ and and let $n_4$ denote the resulting number of entries in the list;
		\item	list all pairs of the form $(\alpha_i\cdot\dual{\omega},\sigma)$, for $i<n_4$, such that $\sigma=\forall w\sigma_i^{\theta(w,v)}$ and and redefine $n_0$ to be the resulting number of entries in the list;
		\item	repeat steps 1 to 5.
	\end{enumerate}

	By way of induction (on $\alpha\in\Mzero$) it can be shown that each member of the set $R^\prime$ does indeed appear as some entry in the above list.  Consequently, we may conclude that the set $R$ is in fact recursively enumerable, as required.
\end{proof}

\begin{thm}
	The theory $\Th(\scattered)$ is decidable.
\end{thm}
\begin{proof}
	From Proposition \ref{prp:rescat} and Lemma \ref{lem:psscat}, there exists machines $M_0$ and $M_1$ which, respectively, list the members of $\Th(\scattered)$ and the set of pairs
	\begin{equation}
		R=\setbuild{(\alpha,\sigma)}{\alpha\in\Mzero)\text{ and }\alpha\models\sigma}.
	\end{equation}
	Now consider a machine $M$ which, when given a sentence $\sigma$, alternately produces entries from each list until either $\sigma$ or, for some $\alpha\in\Mzero$, $(\alpha,\neg\sigma)$ appears in the list, at which point the machine halts and returns the value "True" if $\sigma$ appeared on the list as member of $\Th(\scattered)$ and returns "False" otherwise.

	We now need to argue that $M$ always halts irrespective of the choice of input sentence.  The case where $\sigma\in\Th(\scattered)$ is trivial so suppose that $\sigma\notin\Th(\scattered)$.  By definition, there must exist an $\alpha\in\scattered$ such that $\alpha\models\neg\sigma$.  Choose $n=\qrank(\sigma)$ and recall it follows from the theorem of L\"auchli and Leonard that, for some $\beta_n\in\Mzero$, it holds that $\beta_n\nequiv{n}\alpha$ and thus $\beta_n\models\neg\sigma$.  Consequently, $(\beta_n,\neg\sigma)\in R$ and thus $(\beta_n,\neg\sigma)$ will appear in the list and $M$ will return "False".  Therefore, the machcine $M$ always halts --- as required.
\end{proof}
